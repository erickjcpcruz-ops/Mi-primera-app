<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mega Reward Bot</title>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <style>
        body { background: #0f0f0f; color: white; font-family: sans-serif; text-align: center; padding-top: 50px; }
        .card { background: #1e1e1e; padding: 20px; border-radius: 20px; margin: 0 20px; }
        .puntos { font-size: 40px; color: #00ff88; margin: 10px 0; }
        .btn-main { background: linear-gradient(45deg, #007bff, #00c6ff); border: none; color: white; padding: 15px 30px; border-radius: 50px; font-size: 18px; cursor: pointer; width: 100%; }
    </style>
</head>
<body>
    <div class="card">
        <h3>Tu Balance</h3>
        <div class="puntos" id="balance">0</div>
        <p>Puntos acumulados</p>
        <button class="btn-main" onclick="mostrarAnuncio()">üì∫ VER VIDEO (+50 pts)</button>
    </div>

    <script>
        // CONFIGURACI√ìN DE SUPABASE
        const supabaseUrl = 'https://ztoscymfplscnyybzzij.supabase.co'; // Ya la saqu√© de tu captura
        const supabaseKey = 'TU_API_KEY_AQU√ç'; // P√©gala aqu√≠ (la que dice 'anon' o 'public')
        const supabase = supabase.createClient(supabaseUrl, supabaseKey);

        let saldo = parseInt(localStorage.getItem('puntos')) || 0;
        document.getElementById('balance').innerText = saldo;

        async function mostrarAnuncio() {
            // Simulamos el video. Al terminar:
            saldo += 50;
            document.getElementById('balance').innerText = saldo;
            localStorage.setItem('puntos', saldo);

            // GUARDAR EN TU TABLA "profiles" (la que tiene telegram_id)
            const { error } = await supabase
                .from('profiles')
                .upsert({ 
                    telegram_id: 1, // Cambia esto por tu ID real despu√©s
                    total_points: saldo 
                });

            if (error) console.log("Error:", error.message);
            else alert("¬°Puntos guardados en Supabase!");
        }
    </script>
</body>
</html>
