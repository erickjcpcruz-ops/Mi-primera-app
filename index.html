<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
  // 2. Configuración con tus datos reales de los API Docs
  const _supabaseUrl = 'https://ztoscymfplscnyybzzij.supabase.co';
  const _supabaseKey = 'TU_CLAVE_ANON_REAL_AQUÍ'; // <--- PEGA TU KEY AQUÍ
  const _supabase = supabase.createClient(_supabaseUrl, _supabaseKey);

  let saldo = 0;

  async function mostrarAnuncio() {
    // Aumentar saldo visualmente en Vercel
    saldo += 50;
    const balanceElement = document.getElementById('balance');
    if (balanceElement) balanceElement.innerText = saldo;

    // Guardar en la nube
    const { error } = await _supabase
      .from('posts')
      .upsert({ 
        telegram_user_id: 7, // Identificador de humano verificado
        total_points: saldo,
        content: "Puntos sumados desde Worldcoin App" 
      }, { onConflict: 'telegram_user_id' });

    if (error) {
      console.error("Error al guardar:", error.message);
    } else {
      console.log("¡Sincronizado con éxito!");
    }
  }
</script>
