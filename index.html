
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
  // Vercel inyecta estas variables automáticamente si usas un framework
  // Pero en un HTML plano, es mejor pegarlas una última vez para asegurar
  const _supabaseUrl = 'https://ztoscymfplscnyybzzij.supabase.co';
  const _supabaseKey = 'PEGA_AQUI_LA_KEY_QUE_PUSISTE_EN_VERCEL'; 
  const _supabase = supabase.createClient(_supabaseUrl, _supabaseKey);

  let saldo = 0;

  async function mostrarAnuncio() {
    saldo += 50;
    document.getElementById('balance').innerText = saldo;

    // Sincronización con la identidad única de Worldcoin
    const { error } = await _supabase
      .from('posts')
      .upsert({ 
        telegram_user_id: 7, 
        total_points: saldo,
        content: "Humano verificado" 
      }, { onConflict: 'telegram_user_id' });

    if (error) console.error("Error:", error.message);
  }
</script>
